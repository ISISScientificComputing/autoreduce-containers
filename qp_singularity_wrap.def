Bootstrap: docker-daemon
From: autoreduction/qp:latest
Includecmd: no

%environment
    # Disabled a warning when importing Mantid
    export HDF5_DISABLE_VERSION_CHECK=1
    # Specifies Mantid-specific environment
    export PYTHONPATH=/opt/Mantid/scripts/:/opt/Mantid/scripts/Diffraction/:/opt/Mantid/bin:/opt/Mantid/lib:/opt/Mantid/plugins:/opt/Mantid/scripts/SANS/:/opt/Mantid/scripts/Inelastic/

    # Specifies a custom location for the user properties, but
    # currently disabled to allow easier addition of paths.
    # This means that when run with Singularity, Mantid will look for ~/.mantid/Mantid.user.properties
    # and when run with Docker you need to specify it with -e MANTIDPROPERTIES=/Mantid.user.properties
    # ENV MANTIDPROPERTIES /Mantid.user.properties

%startscript
    python3 /autoreduce/queue_processors/queue_processor/queue_listener.py &
